@page "/login"
@using Microsoft.AspNetCore.SignalR.Client
@using BlazorSuviIdent.Shared
@using Microsoft.AspNetCore.Http 
@inject NavigationManager _nm
@inject HttpClient _hc



<p><b>@_greska</b></p>


<EditForm Model="_reg" OnSubmit="LogIn">
	<p>Ime:</p>
	<InputText @bind-Value="_reg.Uname" />
	<p>Sifra:</p>
	<InputText @bind-Value="_reg.Sifra" />
	<p><button class="btn-primary" type="submit">Log in</button></p>
</EditForm>


@code
{
	private Registracija _reg = new Registracija();
	private string _greska;


	private async Task LogIn()
	{
		_greska = "";
		if (await _hc.PostJsonAsync<bool>("LogIn", _reg))
			_nm.NavigateTo("/", forceLoad : true);
		else
			_greska = "No go";

	}
}
